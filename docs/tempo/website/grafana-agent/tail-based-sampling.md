---title: "Tail-based sampling"---# Tail-based samplingTempo aims to provide an inexpensive solution that makes 100% sampling possible.However, sometimes constraints will make a lower sampling percentage necessary or desirable,such as runtime or egress traffic related costs.Probabilistic sampling strategies are easy to implement,but also run the risk of discarding relevant data that you'll later want.In tail-based sampling, sampling decisions are made at the end of the workflow.The Grafana Agent groups spans by trace ID and makes a sampling decision based on the data contained in the trace.For instance, inspecting if a trace contains an error.One particular challenge of grouping trace data is for multi-instance Agent deployments,where spans that belong to the same trace can arrive to different Agents.To solve that, in the Agent is possible to distribute traces across agent instances by consistently exporting spans belonging to the same trace to the same agent.<p align="center"><img src="../tail-based-sampling.png" alt="Tail-based sampling overview"></p>## Quick startTo start using tail-based sampling, define a sampling policy.If you're using a multi-instance deployment of the agent,add load balancing and specify the resolving mechanism to find other Agents in the set up.To see all the available config options, refer to the [configuration reference](https://github.com/grafana/agent/blob/main/docs/configuration-reference.md#tempo_instance_config).```tempo:  configs:    - name: default      ...      tail_sampling:        policies:          - rate_limiting:               spans_per_second: 50        load_balancing:          resolver:            dns:              hostname: host.namespace.svc.cluster.local```