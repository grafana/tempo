---
title: V1.5
weight: 70
---

# Version 1.5 release notes

The Tempo team is pleased to announce the release of Tempo 1.5.

With this release, Tempo adds Parquet block support (experimental), anonymous usage reporting to help the Tempo team and Grafana understand how Tempo is used, and enhancements to the metrics-generator. 

We encourage users to upgrade to Grafana 9.1 to see additional Tempo-powered capabilities,
such as the [application performance management (APM) dashboard](https://grafana.com/docs/tempo/latest/metrics-generator/app-performance-mgmt/) which visualizes span metrics (traces data for rates, error rates, and durations (RED)) and service graphs.

>**Note**: For a complete list of changes and enhancements, refer to the [Tempo 1.5 changelog](https://github.com/grafana/tempo/releases). 


## Features and enhancements

Version 1.5 contains the following features and enhancements. 

### Apache Parquet block format support

Tempo now has a columnar block format based on Apache Parquet.
A columnar block format may result in improved search performance and also enables a large ecosystem of tools access to the underlying trace data.

This feature is experimental.

While Parquet can be used as a drop-in replacement, Parquet requires more CPU and memory resources.
No data conversion or upgrade process is necessary.
Once Parquet is enabled, Tempo starts writing new data in the new format.
Existing data are left as-is. 

To use Parquet, set the block format option to `vParquet` in the configuration file.
Refer to the [Configuration documentation](https://grafana.com/docs/tempo/latest/configuration/#storage) for more information.

```yaml
# block format version. options: v2, vParquet
[version: <string> | default = v2]
```

For more information, refer to the [Parquet design document](https://github.com/mdisibio/tempo/blob/design-proposal-parquet/docs/design-proposals/2022-04%20Parquet.md) and [Issue 1480](https://github.com/grafana/tempo/issues/1480).

### Metrics-generator enhancements

The [metrics-generator]({{< relref "../metrics-generator/" >}}) now includes databases and requests across messaging systems in service graph metrics. 
The OpenTelemetry semantic conventions are used to detect when a span is involved in one of these systems. [PR 1576](https://github.com/grafana/tempo/pull/1576)

In addition, metrics-generator supports per-tenant processor configuration. [PR 1434](https://github.com/grafana/tempo/pull/1434)

### Anonymous usage reporting
  
By default, Tempo will report anonymous usage data about the shape of a deployment to Grafana Labs. This data is used to determine how common the deployment of certain features are, if a feature flag has been enabled, replication factor or compression levels, etc.

Usage reporting helps provide anonymous information on how people use Tempo and what the Tempo team should focus on for features and documentation. No private information is collected, and all reports are completely anonymous.

Reporting is controlled by the `usage_report` configuration option and can be disabled. For instructions, refer to [the Configuration documentation](https://grafana.com/docs/tempo/latest/configuration/#usage-report). [PR 1465](https://github.com/grafana/tempo/pull/1481)

## Upgrade considerations

When upgrading to Tempo v1.5, be aware of these breaking changes:

- [PR 1478](https://github.com/grafana/tempo/pull/1478) To build advanced visualization features into Grafana, we have decided to change our spanmetric names to match OpenTelemetry (OTel) conventions. Any functionality added to Grafana will work whether you use Tempo, Grafana Agent, or the OTel Collector to generate metrics.
   The old histogram metric name in Tempo 1.4.x:
   ```
   traces_spanmetrics_duration_seconds_{sum,count,bucket}
   ```
   New metric name:
   ```
   traces_spanmetrics_latency_{sum,count,bucket}
   ```
   Additionally, the default label `span_status` is renamed to `status_code`.

- [PR 1556](https://github.com/grafana/tempo/pull/1556) Jsonnet users will need to specify ephemeral storage requests and limits for the metrics generator.
   ```
    _config+:: {
      metrics_generator+: {
        ephemeral_storage_request_size: '10Gi',
        ephemeral_storage_limit_size: '11Gi',
      },
    }
   ```

- [PR 1465](https://github.com/grafana/tempo/pull/1481) Anonymous usage reporting has been added. Distributors and metrics generators will now require permissions to object storage equivalent to compactors and ingesters. This feature is enabled by default but can be disabled easily.

- [PR 1558](https://github.com/grafana/tempo/pull/1558) Deprecated metrics `tempodb_(gcs|s3|azure)_request_duration_seconds` have been removed in favor of `tempodb_backend_request_duration_seconds`. These metrics have been deprecated since v1.1.

## Bug fixes

### 1.5.0 bug fixes

Version 1.5.0 includes the following fixes: 

- [PR 1441](https://github.com/grafana/tempo/pull/1441) Fixed nil pointer panic when the trace by id path errors.

- [PR 1472](https://github.com/grafana/tempo/pull/1472) Updated Tempo microservices Helm values example which missed the 'enabled' key for thriftHttp.

- [PR 1468](https://github.com/grafana/tempo/pull/1468) Fix race condition in forwarder overrides loop.

- [PR 1538](https://github.com/grafana/tempo/pull/1538) Fixed v2 backend check on span name to be substring.

- [PR 1548](https://github.com/grafana/tempo/pull/1548) Fixed wal check on span name to be substring.

- [Issue 1258](https://github.com/grafana/tempo/issues/1258) Prevented the ingester panic "cannot grow buffer".

- [PR 1554](https://github.com/grafana/tempo/pull/1554) metrics-generator: do not remove `x-scope-orgid header` in single tenant modus.

- [PR 1589](https://github.com/grafana/tempo/pull/1589) Fixed an issue where backend does not support `root.name` and `root.service.name`.

- [Issue 1603](https://github.com/grafana/tempo/issues/1603) Fixed the ingester to continue starting up after block replay error.