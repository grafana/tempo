---
title: Amazon S3 permissions
description: Set Amazon S3 permissions for Tempo.
weight: 20
---
# Amazon S3 permissions

For configuration options, refer to the storage section on the [configuration]({{< relref "../configuration#storage" >}}) page.

The following authentication methods are supported:
- AWS environment variables `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`
- Static access key and secret credentials specified in `access_key` and `secret_key`
- MinIO environment variables `MINIO_ACCESS_KEY` and `MINIO_SECRET_KEY`
- AWS shared credentials [configuration file](https://docs.aws.amazon.com/ses/latest/DeveloperGuide/create-shared-credentials-file.html)
- MinIO client credentials [configuration file](https://github.com/minio/mc/blob/master/docs/minio-client-configuration-files.md)
- AWS IAM ([IRSA via WebIdentity](https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html),
- AWS [EC2 instance role](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html))

The following IAM policy shows minimal permissions required by Tempo, where the bucket has already been created.

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "TempoPermissions",
            "Effect": "Allow",
            "Action": [
                "s3:PutObject",
                "s3:GetObject",
                "s3:ListBucket",
                "s3:ListObjects"
                "s3:DeleteObject",
                "s3:GetObjectTagging",
                "s3:PutObjectTagging"
            ],
            "Resource": [
                "arn:aws:s3:::<bucketname>/*",
                "arn:aws:s3:::<bucketname>"
            ]
        }
    ]
}
```

## Lifecycle policy
A lifecycle policy is recommended that deletes incomplete multipart uploads after one day.

## Authentication


## Troubleshoot


### Error: `Failed to init module services error initializing module`

Problem: Receive an error message stating, `err="failed to init module services error initialising module: store: failed to create store unexpected error from ListObjects on BUCKET: Access Denied"`.

Context: Using Tempo 2.2 with S3 object store with `s3:*` permissions on the IAM role

Solution: Tempo 2.2.2 had a regression that caused the S3 storage to not work with AWS IRSA. This issue was documented in [tempo-2888](https://github.com/grafana/tempo/issues/2888) and resolved with [PR 2895](https://github.com/grafana/tempo/issues/2895).


